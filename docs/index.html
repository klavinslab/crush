<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1>CRUSH</h1>

<h1>Installation</h1>

<p>To build the crush Docker image:</p>

<pre class="code bash"><code class="bash">  docker build -t crush .
</code></pre>

<p>Before using crush, you&#39;ll have to edit <code>config.json</code> to specify your connection to Aquarium. See <code>config-example.json</code>. </p>

<p>And to run it and log log into it</p>

<pre class="code bash"><code class="bash">  docker run -v &quot;$PWD:/home/crush&quot; -it crush bash
</code></pre>

<p>The -v option mounts the current directory into the docker image&#39;s filesystem so you can access your local files forom within the image. </p>

<p>Once logged into the docker instance, you should be able to execute:</p>

<pre class="code bash"><code class="bash">crush
</code></pre>

<h1>Testing the Connection</h1>

<p>Do</p>

<pre class="code bash"><code class="bash">crush ping
</code></pre>

<p>to see if crush can connect to your server. Currently, crush only uses the &quot;staging&quot; server, so that&#39;s the one to specify correctly in config.json.</p>

<h1>Getting Statistics</h1>

<p>Do</p>

<pre class="code bash"><code class="bash">crush stats
crush stats -mr
crust stats -md
</code></pre>

<p>to see statistics for various operation types. The <code>mr</code> option shows the top 10 most recently exectued operation types. The <code>md</code> option shows the top 10 most successfully completed operation types. This could be used to decide where to put your efforts in improving the protocol code base.</p>

<h1>Pulling Code</h1>

<p>To get all the Operation Type code and Library code off of an instance do</p>

<pre class="code bash"><code class="bash">crush pull
</code></pre>

<p>For now this will pull from your staging server. If will create a directory structure that looks like this</p>

<pre class="code ruby"><code class="ruby">staging/
  Category One/
    lib/
      Lib1/
        info.json
        source.rb
      Lib2/
        info.json
        source.rb

    op/
      OpType1/
        documentation.md
        info.json
        precondition.rb
        protocol.rb
        test.rb
    op/
      OpType2/
        documentation.md
        info.json
        precondition.rb
        protocol.rb
        test.rb
  Category Two/
    ...
</code></pre>

<p>You can version control this whole thing with git, for example, doing</p>

<pre class="code bash"><code class="bash">cd staging
git init
git add .
git commit -m &quot;Initial commit&quot;
</code></pre>

<h1>Pushing Code</h1>

<p>After editing code, you can push it back to an Aquarium instance. On the command line, change to a directory containing either library code or operation type code. Then do</p>

<pre class="code bash"><code class="bash">crush push
</code></pre>

<p>In a library code directory, this command will push the <code>source.rb</code> file to the instance. In an operation type directory, this command will push <code>protocol.rb</code>, <code>precondition.rb</code>, <code>test.rb</code>, and <code>documentation.md</code> back to the instance. </p>

<h1>Testing Code</h1>

<p>To test code, change into an operation type directory and do</p>

<pre class="code bash"><code class="bash">crush test
</code></pre>
</div></div>

      <div id="footer">
  Generated by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.7.4).
</div>

    </div>
  </body>
</html>